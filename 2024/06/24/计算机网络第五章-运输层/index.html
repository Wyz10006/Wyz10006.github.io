

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/%E5%A4%B4%E5%83%8F.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="竹合安木">
  <meta name="keywords" content="">
  
    <meta name="description" content="一、运输层概述  1、进程间的通信  在计算机网络中实际进行通信的真正实体：是位于通信两端主机中的进程。 如何为运行在不同主机上的应用进程提供直接的逻辑通信服务，就是运输层的主要任务。 运输层协议又称为端到端协议（端到端的通信是应用进程之间的通信）。   2、运输层中的两个重要协议  TCP  传输控制协议（Transmission Control Protocol，TCP）为其上层提供的是面向">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络第五章 运输层">
<meta property="og:url" content="https://wyz10006.github.io/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/index.html">
<meta property="og:site_name" content="竹合安木的博客">
<meta property="og:description" content="一、运输层概述  1、进程间的通信  在计算机网络中实际进行通信的真正实体：是位于通信两端主机中的进程。 如何为运行在不同主机上的应用进程提供直接的逻辑通信服务，就是运输层的主要任务。 运输层协议又称为端到端协议（端到端的通信是应用进程之间的通信）。   2、运输层中的两个重要协议  TCP  传输控制协议（Transmission Control Protocol，TCP）为其上层提供的是面向">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://wyz10006.github.io/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/1.png">
<meta property="og:image" content="https://wyz10006.github.io/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/2.png">
<meta property="og:image" content="https://wyz10006.github.io/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/3.png">
<meta property="og:image" content="https://wyz10006.github.io/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/4.png">
<meta property="og:image" content="https://wyz10006.github.io/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/5.png">
<meta property="og:image" content="https://wyz10006.github.io/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/6.png">
<meta property="og:image" content="https://wyz10006.github.io/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/7.png">
<meta property="og:image" content="https://wyz10006.github.io/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/8.png">
<meta property="og:image" content="https://wyz10006.github.io/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/9.png">
<meta property="og:image" content="https://wyz10006.github.io/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/10.png">
<meta property="article:published_time" content="2024-06-24T03:36:07.000Z">
<meta property="article:modified_time" content="2024-07-09T08:31:59.827Z">
<meta property="article:author" content="竹合安木">
<meta property="article:tag" content="计网">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://wyz10006.github.io/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/1.png">
  
  
  
  <title>计算机网络第五章 运输层 - 竹合安木的博客</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/meihua.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"wyz10006.github.io","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"Tge3H6EIi2Wf2Gpf9l7LsHS1-gzGzoHsz","app_key":"3LOGiBjL7YN8wgXZXHDkhDZD","server_url":"https://tge3h6ei.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":true}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  
    <!-- Google tag (gtag.js) -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=", function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', '');
        });
      }
    </script>
  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 7.1.1"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>竹合安木的博客</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/none.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="计算机网络第五章 运输层"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-06-24 11:36" pubdate>
          2024年6月24日 中午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          7.1k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          60 分钟
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">计算机网络第五章 运输层</h1>
            
            
              <div class="markdown-body">
                
                <h2 id="一-运输层概述"><a class="markdownIt-Anchor" href="#一-运输层概述"></a> 一、运输层概述</h2>
<h3 id="1-进程间的通信"><a class="markdownIt-Anchor" href="#1-进程间的通信"></a> 1、进程间的通信</h3>
<ul>
<li>在计算机网络中实际进行通信的真正实体：是<strong>位于通信两端主机中的进程</strong>。</li>
<li>如何为运行在不同主机上的<strong>应用进程提供直接的逻辑通信服务</strong>，就是运输层的主要任务。</li>
<li><strong>运输层协议又称为端到端协议</strong>（端到端的通信是应用进程之间的通信）。</li>
</ul>
<h3 id="2-运输层中的两个重要协议"><a class="markdownIt-Anchor" href="#2-运输层中的两个重要协议"></a> 2、运输层中的两个重要协议</h3>
<h4 id="tcp"><a class="markdownIt-Anchor" href="#tcp"></a> TCP</h4>
<ul>
<li><strong>传输控制协议</strong>（Transmission Control Protocol，TCP）为其上层提供的是<strong>面向连接的可靠的</strong>数据传输服务。</li>
<li>使用TCP通信的双方，在传送数据之前<strong>必须首先建立TCP连接</strong>（<strong>逻辑连接</strong>，而非物理连接）。数据<strong>传输结束后必须要释放TCP连接</strong>。</li>
<li>TCP为了实现可靠传输，就必须使用很多措施，例如TCP连接管理、确认机制、超时重传、流量控制以及拥塞控制等。</li>
<li>TCP的<strong>实现复杂</strong>，TCP报文段的<strong>首部比较大</strong>，<strong>占用处理机资源比较多</strong>。</li>
</ul>
<h4 id="udp"><a class="markdownIt-Anchor" href="#udp"></a> UDP</h4>
<ul>
<li><strong>用户数据报协议</strong>（User Datagram Protocol，UDP）为其上层提供的是<strong>无连接的不可靠的</strong>数据传输服务。</li>
<li>使用UDP通信的双方，在传送数据之前<strong>不需要建立连接</strong>。</li>
<li>UDP不需要实现可靠传输，因此<strong>不需要使用实现可靠传输的各种机制</strong>。</li>
<li>UDP的<strong>实现简单</strong>，UDP用户数据报的<strong>首部比较小</strong>。</li>
</ul>
<h3 id="3-运输层的端口"><a class="markdownIt-Anchor" href="#3-运输层的端口"></a> 3、运输层的端口</h3>
<ul>
<li>运行在计算机上的进程是使用<strong>进程标识符</strong>（Process Identification，PID）来标识的。</li>
<li>运行在应用层的各种应用进程不应当让计算机操作系统指派它的进程标识符，原因是：
<ul>
<li>互联网上的计算机并不是使用统一的操作系统，而不同操作系统（Windows、Linux、MacOS）又使用不同格式的进程标识符。</li>
<li>为了使运行不同操作系统的计算机的应用进程之间能够基于网络进行通信，就<strong>必须使用统一的方法对TCP/IP体系的应用进程进行标识</strong>。</li>
</ul>
</li>
<li>TCP/IP体系结构的<strong>运输层使用协议端口号</strong>（Protocol Port Number）来标识和区分不同应用进程。
<ul>
<li>进程的创建和撤销都是动态的，发送方几乎无法识别其他机器上的进程。</li>
<li>有时用户会改换接收报文的进程，这并不需要通知所有发送方。</li>
<li>往往需要利用目的主机提供的功能来识别终点，但并不需要知道实现这个功能的进程。</li>
</ul>
</li>
<li>端口号的长度为16比特，取值范围是0~65535。</li>
</ul>
<img src="/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/1.png" srcset="/img/loading.gif" lazyload class="">
<ul>
<li>两个不同的端口概念：
<ul>
<li><strong>软件端口</strong>：在协议栈层间的抽象的<strong>协议端口</strong>。</li>
<li>硬件端口：路由器或交换机上的端口。</li>
</ul>
</li>
<li>硬件端口是不同硬件设备进行交互的接口，而<strong>软件端口是应用层的各种协议进程与运输实体进行层间交互的一种地址</strong>。</li>
</ul>
<h2 id="二-udp协议和tcp协议概述"><a class="markdownIt-Anchor" href="#二-udp协议和tcp协议概述"></a> 二、UDP协议和TCP协议概述</h2>
<ul>
<li>
<p>UDP支持单播、多播和广播；TCP仅支持单播。</p>
</li>
<li>
<p>UDP是面向应用报文的；TCP是面向字节流的。</p>
</li>
<li>
<p>UDP向上层提供无连接不可靠传输服务（适用于IP电话、视频会议等<strong>实时应用</strong>）；TCP向上层提供面向连接的可靠传输服务（适用于要求<strong>可靠传输的应用</strong>，例如<strong>文件传输</strong>）。</p>
</li>
<li>
<p>UDP用户数据报首部仅8字节；TCP报文段首部最小20字节，最大60字节。</p>
</li>
<li>
<p>UDP只在IP的数据报服务之上增加了很少一点的功能：</p>
<ul>
<li>复用和分用的功能，</li>
<li>差错检测的功能。</li>
</ul>
</li>
<li>
<p>虽然UDP用户数据报只能提供不可靠的交付，但UDP在某些方面有其特殊的优点。</p>
<ul>
<li>UDP是无连接的，<strong>发送数据之前不需要建立连接</strong>，减少了开销和发送数据之前的时延。</li>
<li>UDP使用尽最大努力交付，即不保证可靠交付，不需要维持复杂的连接状态表。</li>
<li>UDP是面向报文的，UDP对应用层交下来的报文，既不合并，也不拆分，而是保留这些报文的边界（<strong>UDP一次交付一个完整的报文</strong>）。</li>
<li>UDP没有拥塞控制，因此网络出现的拥塞不会使源主机的发送速率降低。这对某些实时应用是很重要的，<strong>适合多媒体通信的要求</strong>。端口号的长度为16比特，取值范围是0~65535。</li>
<li>UDP支持一对一、一对多、多对一和多对多的交互通信。</li>
<li>UDP的首部开销小，<strong>只有8个字节</strong>，比TCP的20个字节的首部要短。</li>
</ul>
</li>
<li>
<p>应用程序必须选择合适大小的报文。</p>
<ul>
<li>若报文太长，UDP把它交给IP层后，IP层在传送时可能要进行<strong>分片</strong>，这会降低IP层的效率。</li>
<li>若报文太短，UDP把它交给IP层后，IP数据报的<strong>首部的相对长度太大</strong>，这也降低了IP层的效率。</li>
</ul>
</li>
<li>
<p>UDP用户数据报有两个字段：数据字段和首部字段，首部字段只有 8 个字节。</p>
</li>
<li>
<p>在计算检验和时，<strong>临时</strong>把“伪首部”和UDP用户数据报连接在一起。<strong>伪首部仅是为了计算检验和</strong>。</p>
</li>
</ul>
<img src="/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/2.png" srcset="/img/loading.gif" lazyload class="">
<h2 id="三-tcp报文段的首部格式"><a class="markdownIt-Anchor" href="#三-tcp报文段的首部格式"></a> 三、TCP报文段的首部格式</h2>
<h3 id="1-传输控制协议tcp"><a class="markdownIt-Anchor" href="#1-传输控制协议tcp"></a> 1、传输控制协议TCP</h3>
<ul>
<li>TCP是面向连接的运输层协议：建立/释放逻辑连接（虚连接）。</li>
<li>每一条TCP连接只能有两个端点 (endpoint)，每一条TCP连接只能是点对点的（一对一）。</li>
<li>TCP提供可靠交付的服务：<strong>无差错、不丢失、按顺序、不重复</strong>。</li>
<li>TCP提供全双工通信：TCP连接的两端都设有发送缓存和接收缓存。</li>
<li>面向字节流。
<ul>
<li>“流”（stream）指的是流入或流出进程的<strong>字节序列</strong>。</li>
<li>虽然应用程序和TCP的交互是一次一个数据块，但TCP把应用程序交下来的数据看成仅仅是一连串无结构的字节流。</li>
<li>TCP不保证接收方应用程序所收到的数据块和发送方所发出的数据块具有对应大小的关系。</li>
<li>但接收方应用程序收到的字节流必须和发送方应用程序发出的字节流完全一样。</li>
</ul>
</li>
<li>TCP根据对方窗口值和网络拥塞程度来决定一个报文段应包含多少个字节；UDP的报文长度是应用进程给出的。</li>
<li>TCP可把太长的数据块划分短一些再传送，也可等待积累有足够多的字节后再构成报文段发送出去。</li>
</ul>
<h3 id="2-tcp报文段的首部格式"><a class="markdownIt-Anchor" href="#2-tcp报文段的首部格式"></a> 2、TCP报文段的首部格式</h3>
<ul>
<li>TCP是面向字节流的，但TCP传送的数据单元却是报文段。</li>
<li>TCP的全部功能需要依靠其首部中的各字段来实现。</li>
<li>TCP报文段首部前20个字节是固定的，后面有4n字节是根据需要而增加的选项。<strong>TCP首部的最小长度是20字节</strong>。</li>
</ul>
<img src="/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/3.png" srcset="/img/loading.gif" lazyload class="">
<ul>
<li>
<p>序号：占32比特，取值范围0~2<sup>32</sup>-1。当序号增加到最后一个时，下一个序号又回到0。<strong>用来指出本TCP报文段数据载荷的第一个字节的序号</strong>。</p>
</li>
<li>
<p>确认号：占32比特，取值范围0~2<sup>32</sup>-1。当确认号增加到最后一个时，下一个确认号又回到0。<strong>用来指出期望收到对方下一个TCP报文段的数据载荷的第一个字节的序号，同时也是对之前收到的所有数据的确认</strong>。</p>
</li>
<li>
<p>确认标志位ACK：<strong>只有当ACK取值为1时，确认号字段才有效</strong>。ACK取值为0时，确认号字段无效。TCP规定：<strong>在TCP连接建立后，所有传送的TCP报文段都必须把ACK置1</strong>。</p>
</li>
<li>
<p>数据偏移：占4比特，该字段的取值<strong>以4字节为单位</strong>。指出TCP报文段的<strong>数据载荷部分</strong>的起始处距离TCP报文段的起始处有多远，<strong>这实际上指出了TCP报文段的首部长度</strong>。</p>
</li>
<li>
<p>保留：占6比特；保留为今后使用；目前应置为0。</p>
</li>
<li>
<p>窗口：占16比特，该字段的取值<strong>以字节为单位</strong>；指出发送本报文段的一方的<strong>接收窗口的大小（非发送窗口）</strong>，即接收缓存的可用空间大小（允许对方发送的数据量），用来表征<strong>接收能力</strong>；在计算机网络中，经常<strong>用接收方接收能力的大小来控制发送方的数据发送量</strong>，这就是所谓的<strong>流量控制</strong>。</p>
</li>
<li>
<p>检验和：占16比特；<strong>用来检查整个TCP报文段在传输过程中是否出现了误码</strong>。</p>
</li>
<li>
<p>发送方检验和计算方法</p>
<ul>
<li>将TCP首部中检验和字段的值置为0。</li>
<li>将伪首部、TCP首部以及数据载荷这三部分<strong>划分成若干个2字节的单元</strong>。若伪首部、TCP首部以及数据载荷这三部分的总长度不是偶数个字节，则在最后添加1个“全0”字节。</li>
<li>对划分出的全部2字节的单元进行<strong>反码算数运算求和</strong>，并将求和结果<strong>取反</strong>。</li>
<li>将步骤③得到的结果写入TCP首部中的检验和字段。</li>
</ul>
</li>
<li>
<p>同步标志位SYN</p>
<ul>
<li>同步标志位用于TCP“三报文握手”<strong>建立连接</strong>。</li>
<li>当<strong>SYN=1且ACK=0</strong>时，表明这是一个<strong>TCP连接请求报文段</strong>。</li>
<li>对方若<strong>同意建立连接</strong>，则应在<strong>响应</strong>的TCP报文段的首部中使<strong>SYN=1且ACK=1</strong>。、</li>
<li>SYN=1的TCP报文段<strong>要么是一个连接请求报文段，要么是一个连接响应报文段</strong>。</li>
</ul>
</li>
<li>
<p>终止标志位FIN</p>
<ul>
<li>终止标志位用于TCP“四报文挥手”<strong>释放连接</strong>。</li>
<li>当<strong>FIN=1</strong>时，表明此TCP报文段的发送方已经将全部数据发送完毕，现在<strong>要求释放TCP连接</strong>。</li>
</ul>
</li>
<li>
<p>复位标志位RST</p>
<ul>
<li>复位标志位用于复位TCP连接。</li>
<li>当RST=1时，表明TCP连接中<strong>出现严重差错</strong>，必须<strong>释放连接</strong>，然后再<strong>重新建立连接</strong>。</li>
<li><strong>RST置1还用来拒绝一个非法的TCP报文段或拒绝打开一个TCP连接</strong>。</li>
</ul>
</li>
<li>
<p>推送标志位PSH</p>
<ul>
<li>发送方把PSH置1，并立即创建一个TCP报文段发送出去，而不需要积累到足够多的数据再发送。</li>
<li>接收方收到PSH=1的TCP报文段，就尽快地交付给应用进程，而不再等到接收到足够多的数据才交付。</li>
</ul>
</li>
<li>
<p>紧急指针</p>
<ul>
<li>占16比特，以字节为单位，用来指明紧急数据的长度。</li>
<li>当<strong>发送方有紧急数据</strong>时，可将紧急数据“<strong>插队</strong>”到发送缓存的最前面，并立刻封装到一个TCP报文段中进行发送。<strong>紧急指针会指出本报文段数据载荷部分包含了多长的紧急数据</strong>，紧急数据之后是普通数据。</li>
<li><strong>当接收方收到URG=1的TCP报文段</strong>，会按照紧急指针字段的值从报文段数据载荷中取出紧急数据并直接上交应用进程，而<strong>不必在接收缓存中排队</strong>。</li>
</ul>
</li>
<li>
<p>紧急标志位URG</p>
<ul>
<li>当URG=1时，紧急指针字段有效。</li>
<li>当URG=0时，紧急指针字段无效。</li>
</ul>
</li>
<li>
<p>选项（长度可变，最大40字节）</p>
<ul>
<li>最大报文段长度MSS选项：指出TCP报文段数据载荷部分的最大长度，而不是整个TCP报文段的长度。</li>
<li>窗口扩大选项：用来扩大窗口，提高吞吐率。</li>
<li>时间戳选项：
<ul>
<li>用于计算往返时间RTT</li>
<li>用于处理序号超范围的情况，又称为防止序号绕回PAWS（protect against wrapped sequence numbers）。</li>
<li>选择确认选项：用来实现选择确认功能。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>填充：若选项字段的长度加上20字节固定首部的长度不能被4字节整除时，需要填充相应数量的比特0，以确保首部长度能被4字节整除。</p>
</li>
</ul>
<h2 id="四-tcp的连接管理"><a class="markdownIt-Anchor" href="#四-tcp的连接管理"></a> 四、TCP的连接管理</h2>
<h3 id="1-tcp的连接"><a class="markdownIt-Anchor" href="#1-tcp的连接"></a> 1、TCP的连接</h3>
<ul>
<li>TCP是面向连接的协议，它基于<strong>运输连接</strong>来传送TCP报文段。</li>
<li>TCP把连接作为最基本的抽象。
<ul>
<li>每一条TCP连接有两个端点。</li>
<li>TCP连接的端点不是主机，不是主机的IP地址，不是应用进程，不是运输层的协议端口。</li>
<li>TCP连接的端点叫做<strong>套接字</strong>（socket）或插口。</li>
<li>端口号拼接（contatenated with）IP地址即构成了套接字。套接字 socket = (IP地址 : 端口号)</li>
<li>每一条TCP连接唯一地被通信两端的两个端点（即两个套接字）所确定。<br />
TCP 连接 := {socket1, socket2} = {(IP1: port1)，(IP2: port2)}</li>
</ul>
</li>
<li>TCP连接就是由协议软件所提供的一种抽象。</li>
<li><strong>同一个IP地址可以有多个不同的TCP连接</strong>。</li>
<li><strong>同一个端口号也可以出现在多个不同的TCP连接中</strong>。</li>
<li>TCP运输连接有以下三个阶段：
<ul>
<li>通过“三报文握手”来建立TCP连接。</li>
<li>基于已建立的TCP连接进行可靠的数据传输。</li>
<li>在数据传输结束后，还要通过“四报文挥手”来释放TCP连接。</li>
</ul>
</li>
</ul>
<h3 id="2-三报文握手建立tcp连接"><a class="markdownIt-Anchor" href="#2-三报文握手建立tcp连接"></a> 2、三报文握手”建立TCP连接</h3>
<ul>
<li>
<p>“三报文握手”建立TCP连接的目的在于解决以下三个主要问题：</p>
<ul>
<li>使TCP双方能够确知对方的存在。</li>
<li>使TCP双方能够协商一些参数（例如最大报文段长度、最大窗口大小、时间戳选项等）。</li>
<li>使TCP双方能够对运输实体资源（缓存大小、各状态变量、连接表中的项目等）进行分配和初始化。</li>
</ul>
</li>
<li>
<p>TCP连接的建立采用客户服务器方式。</p>
<ul>
<li>主动发起连接建立的应用进程叫做客户（client）。</li>
<li>被动等待连接建立的应用进程叫做服务器（server）。</li>
</ul>
</li>
<li>
<p><strong>TCP连接请求报文段</strong>和<strong>TCP连接请求确认报文段</strong>首部中的同步标志位SYN的值必须设置为1。</p>
</li>
<li>
<p>序号seq字段被设置了一个初始值x，作为TCP客户进程所选择的初始序号。</p>
<ul>
<li>TCP规定同步标志位SYN被设置为1的报文段（例如TCP连接请求报文段和TCP连接请求确认报文段）<strong>不能携带数据，但要消耗掉一个序号</strong>。</li>
<li>按上述规定，TCP连接请求报文段不能携带数据（即没有数据载荷），但是会消 耗掉序号x。</li>
<li>因此，TCP客户进程下一次发送的TCP报文段的数据载荷第一个字节的序号为x+1。</li>
</ul>
</li>
<li>
<p>TCP连接请求确认报文段首部中的同步标志位SYN和确认标志位ACK 的值都设置为1。</p>
</li>
<li>
<p>序号seq字段被设置了一个初始值y，作为TCP服务器进程所选择的初始序号。</p>
</li>
<li>
<p>确认号ack字段的值被设置为x+1，这是对TCP客户进程所选择的初始序号x的确认。</p>
</li>
<li>
<p>确认标志位ACK的值被设置为1，这是一个<strong>普通的TCP确认报文段</strong>。</p>
</li>
<li>
<p>因为TCP客户进程之前发送的TCP连接请求报文段的序号为x，该报文段虽然不能携 带数据，但要消耗掉一个序号。因此TCP客户进程发送的第二个报文段的序号为x+1。</p>
<ul>
<li>TCP规定普通的TCP确认报文段可以携带数据，但如果不携带数据，则不消耗序号。如果该报文段不携带数据，则TCP客户进程要发送的下一个数据报文段的序号仍为x+1。</li>
</ul>
</li>
<li>
<p>确认号ack字段的值被设置为y+1，这是对TCP服务器进程所选择的初始序号y的确认。</p>
</li>
</ul>
<img src="/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/4.png" srcset="/img/loading.gif" lazyload class="">
<ul>
<li>使用三报文握手而不是两报文的原因：</li>
</ul>
<img src="/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/5.png" srcset="/img/loading.gif" lazyload class="">
<h3 id="3-四报文挥手释放tcp连接"><a class="markdownIt-Anchor" href="#3-四报文挥手释放tcp连接"></a> 3、“四报文挥手”释放TCP连接</h3>
<ul>
<li>TCP连接释放报文段首部中的终止标志位FIN和确认标志位ACK的值都被设置为1。表明这是一个<strong>TCP连接释放报文段</strong>，同时也对之前收到的TCP报文段进行确认。</li>
<li>序号seq字段的值设置为u，它等于TCP客户进程之前已经传送过的数据的最后一个字节的序号加1。</li>
<li><strong>TCP规定终止标志位FIN等于1的TCP报文段即使不携带数据，也要消耗掉一个序号</strong>。</li>
<li>确认号ack字段的值设置为v，它等于TCP客户进程之前已收到的数据的最后一个字节的序号加1。</li>
<li>确认标志位ACK的值被设置为1，表明这是一个TCP普通确认报文段。</li>
<li>序号seq字段的值设置为v，它等于TCP服务器进程之前已传送过的数据的最后一个字节的序号加1。这也与之前收到的TCP连接释放报文段中的确认号v匹配。</li>
<li>确认号ack字段的值设置为u+1，这是对TCP连接释放报文段的确认。</li>
<li>从TCP客户进程到TCP服务器进程这个方向的连接就释放了。此时的TCP连接属于<strong>半关闭状态</strong>。</li>
<li>TCP客户进程已经没有数据要发送了。但TCP服务器进程如果还有数据要发送，TCP客户进程仍要接收，也就是从TCP服务器进程到TCP客户进程这个方向的连接并未关闭。</li>
<li>TCP连接释放报文段首部中的终止标志位FIN和确认标志位ACK的值都被设置为1。表明这是一个TCP连接释放报文段，同时也对之前收到的TCP报文段进行确认。</li>
<li>序号seq字段的值假定被设置为w，这是因为在半关闭状态下TCP服务器进程可能又发送了一些数据。</li>
<li>确认号ack字段的值被设置为u+1，这是对之前收到的TCP连接释放报文段的<strong>重复确认</strong>。</li>
<li>确认标志位ACK的值设置为1，表明这是一个TCP普通确认报文段。</li>
<li>序号seq字段的值设置为u+1，这是因为TCP客户进程之前发送 的TCP连接释放报文段虽然不携带数据，但要消耗掉一个序号。</li>
<li>确认号ack字段的值设置为w+1，这是对所收到的TCP连接释放 报文段的确认。</li>
<li>MSL是<strong>最长报文段寿命</strong>（Maximum Segment Lifetime）的英文缩写词， [RFC793]建议为2分钟。也就是说，TCP客户进程进入时间等待（TIMEWAIT）状态后，还要经过4分钟才能进入关闭（CLOSED）状态。</li>
<li>处于时间等待（TIME-WAIT）状态后要经过2MSL时长，可以<strong>确保TCP服务器进程能够收到最后一个TCP确认报文段而进入关闭（CLOSED）状态</strong>。</li>
<li>另外，TCP客户进程在发送完最后一个TCP确认报文段后，再经过2MSL时长，<strong>就可以使本次连接持续时间内所产生的的所有报文段都从网络中消失</strong>。这样就可以<strong>使下一个新的TCP连接中不会出现旧连接中的报文段</strong>。</li>
</ul>
<img src="/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/6.png" srcset="/img/loading.gif" lazyload class="">
<ul>
<li>TCP保活计时器的作用：若一连发送10个探测报文段后仍无TCP客户进程的响应，TCP服务器进程就认为TCP客户进程所在主机出了故障，于是就关闭这个连接。</li>
</ul>
<h3 id="五-tcp的流量控制"><a class="markdownIt-Anchor" href="#五-tcp的流量控制"></a> 五、TCP的流量控制</h3>
<h3 id="1-tcp的流量控制"><a class="markdownIt-Anchor" href="#1-tcp的流量控制"></a> 1、TCP的流量控制</h3>
<ul>
<li>
<p>一般说来，我们总是希望数据传输得更快一些。但如果发送方把数据发送得过快，接收方就可能来不及接收，这就会造成数据的丢失。</p>
</li>
<li>
<p>流量控制（flow control）是让发送方的发送速率不要太快，既让接收方来得及接收，也不要使网络发生拥塞。</p>
</li>
<li>
<p>利用滑动窗口机制可以很方便地在TCP连接上实现流量控制。</p>
</li>
<li>
<p>为了打破由于非零窗口通知报 文段丢失而引起的双方互相等待的 死锁局面，TCP为每一个连接都设有 一个持续计时器。</p>
</li>
<li>
<p>只要TCP连接的一方收到对方的 零窗口通知，就启动持续计时器。</p>
</li>
<li>
<p>当持续计时器超时时，就发送一 个零窗口探测报文段，仅携带1字节的数据。</p>
</li>
<li>
<p>对方在确认这个零窗口探测报文段时，给出自己现在的接收窗口 值。</p>
</li>
<li>
<p>如果接收窗口值仍然是0，那么收到这个报文段的一方就重新启动 持续计时器。</p>
</li>
<li>
<p>如果接收窗口值不是0，那么死锁的局面就可以被打破了。</p>
</li>
</ul>
<h2 id="六-tcp的拥塞控制"><a class="markdownIt-Anchor" href="#六-tcp的拥塞控制"></a> 六、TCP的拥塞控制</h2>
<h3 id="1-拥塞控制的基本概念"><a class="markdownIt-Anchor" href="#1-拥塞控制的基本概念"></a> 1、拥塞控制的基本概念</h3>
<ul>
<li>在某段时间，若对网络中某一资源（计算机网络中的链路带宽、交换节点中的缓存和处理机等都是网络的资源）的需求超过了该资源所能提供的可用部分，网络性能就要变坏，这种情况就叫作拥塞（congestion）。</li>
<li>若网络中有许多资源同时产生拥塞，网络的性能就要明显变坏。</li>
<li>若出现拥塞而不进行控制，整个网络的吞吐量将随输入负荷的增大而下降。</li>
<li>增加资源能解决拥塞吗？不能。</li>
<li>这是因为网络拥塞是一个非常复杂的问题。简单地采用上述做法，在许多情况下，不但不能解决拥塞问题， 而且还可能使网络的性能更坏。</li>
<li>网络拥塞往往是由许多因素引起的，例如：
<ul>
<li>增大缓存，但未提高输出链路的容量和处理机的速度，排队等待时间会大大增加，引起大量超时重传。</li>
<li>提高处理机处理的速率会会将瓶颈转移到其他地方。</li>
</ul>
</li>
<li>拥塞常常趋于恶化，例如：
<ul>
<li>若一个路由器没有足够的缓存空间，它就会丢弃一些新到的分组。当分组被丢弃时，源点就会重传这一分组，甚至可能还要重传多次。这样会引起更多的分组流入网络，并被网络中的路由器丢弃。</li>
<li><strong>可见拥塞引起的重传并不会缓解网络的拥塞，反而会加剧网络的拥塞</strong>。</li>
</ul>
</li>
<li>实践证明，拥塞控制是很难设计的，因为它是一个动态的（而不是静态的）问题。</li>
<li>分组的丢失是网络发生拥塞的征兆而不是原因。</li>
<li>在许多情况下，甚至正是拥塞控制本身成为引起网络性能恶化甚至发生死锁的原因。这点应特别引起重视。</li>
</ul>
<h4 id="流量控制与拥塞控制的区别"><a class="markdownIt-Anchor" href="#流量控制与拥塞控制的区别"></a> 流量控制与拥塞控制的区别</h4>
<ul>
<li>流量控制
<ul>
<li>点对点控制：接收端控制发送端</li>
<li>以接收方的接收能力来控制发送方（源点）的发送速率，只与特定的点对点通信的发送方和接收方之间的流量有关。</li>
</ul>
</li>
<li>拥塞控制
<ul>
<li>全局性的控制问题</li>
<li><strong>源点</strong>根据各方面因素，按<strong>拥塞控制算法自行控制发送速率</strong>，是一个全局性的问题，涉及网络中所有的主机、路由器等。</li>
</ul>
</li>
</ul>
<h3 id="2-拥塞控制的基本原理"><a class="markdownIt-Anchor" href="#2-拥塞控制的基本原理"></a> 2、拥塞控制的基本原理</h3>
<ul>
<li>开环控制
<ul>
<li>试图用良好的设计来解决问题。</li>
<li>从一开始就保证问题不会发生。</li>
<li>一旦系统启动并运行起来，就不需要中途修正。</li>
</ul>
</li>
<li>闭环控制
<ul>
<li>基于反馈的控制方法，包括以下三个部分：</li>
<li>监测网络拥塞在何时、何地发生。</li>
<li>把拥塞发生的相关信息传送到可以采取行动的地方。</li>
<li>调整网络的运行以解决拥塞问题。</li>
</ul>
</li>
<li>当网络的流量特征不能准确描述或者当网 络不提供资源预留时，适合使用闭环控制。 互联网采用的就是闭环控制方法。</li>
<li>根据拥塞信息的反馈形式，可将闭环拥塞控制算法分为
<ul>
<li>显式反馈算法：<strong>从拥塞节点（即路由器）向源点</strong>提供关于网络中拥塞状态的显式反馈信息。</li>
<li>隐式反馈算法：源点自身通过对网络行为的观察（例如超 时重传或往返时间RTT）来推断网络是否发生了拥塞。<strong>TCP采用的就是隐式反馈算法</strong>。</li>
</ul>
</li>
</ul>
<h3 id="3-tcp拥塞控制的方法"><a class="markdownIt-Anchor" href="#3-tcp拥塞控制的方法"></a> 3、TCP拥塞控制的方法</h3>
<ul>
<li>TCP采用基于窗口的方法进行拥塞控制，属于闭环控制方法。
<ul>
<li>TCP发送方维持一个拥塞窗口cwnd</li>
<li>拥塞窗口的大小取决于网络的拥塞程度，并且动态地在变化。</li>
<li>发送端利用拥塞窗口根据网络的拥塞情况调整发送的数据量。</li>
<li>真正的发送窗口值为：swnd=min(rwnd, cwnd)</li>
</ul>
</li>
<li>网络没出现拥塞：拥塞窗口就可以再增大一些，以便把更多的分组发送出去，这样就可以提高网络的利用率。</li>
<li>网络（可能）出现拥塞：必须把拥塞窗口减小一些，以减少网络中的分组数，以便缓解网络出现的拥塞。</li>
<li>拥塞的判断：
<ul>
<li>重传定时器超时：出现了<strong>超时</strong>，就可以猜想网络可能出现了拥塞（因传输出差错而丢弃分组远小于1%）。</li>
<li>收到三个重复的ACK：报文段在网络中出现了丢失，预示可能会出现拥塞，可尽快采取措施，避免拥塞。</li>
</ul>
</li>
<li>为了讨论拥塞控制算法的基本原理，假定如下条件
<ul>
<li>数据是单方向传送的，而另一个方向只传送确认。</li>
<li>接收方总是有足够大的接收缓存空间，因而发送方的发送窗口的大小仅由网络的拥塞程度来决定，也就是<strong>不考虑接收方对发送方的流量控制</strong>。</li>
<li>以TCP最大报文段MSS（即TCP报文段的数据载荷部分）的个数作为讨论问题的单位，而不是以字节为单位（尽管TCP是面向字节流的）。</li>
</ul>
</li>
</ul>
<img src="/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/7.png" srcset="/img/loading.gif" lazyload class="">
<img src="/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/8.png" srcset="/img/loading.gif" lazyload class="">
<ul>
<li>
<p>“慢开始”是指一开始向网络注入的报文段少，而并不是指拥塞窗口cwnd的值增长速度慢。</p>
</li>
<li>
<p>“拥塞避免”也并非指完全能够避免拥塞，而是指在拥塞避免阶段将cwnd值控制为按线性规律增长，使网络比较不容易出现拥塞。</p>
</li>
<li>
<p>采用快重传算法可以让发送方尽早知道发生了个别TCP报文段的丢失。</p>
</li>
<li>
<p>“快重传”是指使发送方尽快（尽早）进行重传，而不是等重传计时器超时再重传。</p>
<ul>
<li>接收方不再等待自己发送数据时才进行捎带确认，而是要立即发送确认，即使收到了失序的报文段也要立即发出对已收到的报文段的重复确认。</li>
<li>发送方一旦收到3个连续的重复确认，就将相应的报文段立即重传，而不是等该报文段的重传计时器超时再重传。</li>
</ul>
</li>
<li>
<p>与快重传算法配合使用的是快恢复算法，发送方一旦收到3个重复确认，就知道现在只是丢失了个别的报文段，于是不启动慢开始算法，而是执行快恢复算法。</p>
</li>
<li>
<p>发送方将慢开始门限ssthresh的值和拥塞窗口cwnd的值都调整为当前cwnd值的一半，并执行拥塞避免算法。</p>
</li>
<li>
<p>有的快恢复实现是把快恢复开始时的cwnd值再增大一些，即cwnd=新ssthresh+3。</p>
<ul>
<li>既然发送方收到了3个重复的确认，就表明有3个数据报文段已经离开了网络。</li>
<li>这3个报文段不再消耗网络资源而是停留在接收方的接收缓存中。</li>
<li>可见现在网络中不是堆积了报文段而是减少了3个报文段，因此可以适当把cwnd值增大一些。</li>
</ul>
</li>
</ul>
<img src="/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/9.png" srcset="/img/loading.gif" lazyload class="">
<img src="/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82/10.png" srcset="/img/loading.gif" lazyload class="">
<ul>
<li>可以看出，在<strong>拥塞避免阶段</strong>，拥塞窗口是按照线性规律增大的。常称为**“加法增大”**(AI， Additive Increase) 。</li>
<li>出现超时或3个重复的确认时， 就要把门限值设置为当前拥塞窗口值的一半，并大大减小拥塞窗口的数值。称为“<strong>乘法减小</strong>”(MD ， Multiplicative Decrease)。</li>
<li>就是所谓的<strong>AIMD算法</strong>。</li>
</ul>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="category-chain-item">计算机网络</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E8%AE%A1%E7%BD%91/" class="print-no-link">#计网</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>计算机网络第五章 运输层</div>
      <div>https://wyz10006.github.io/2024/06/24/计算机网络第五章-运输层/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>竹合安木</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年6月24日</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>更新于</div>
          <div>2024年7月9日</div>
        </div>
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="NC - 非商业性使用">
                    <i class="iconfont icon-nc"></i>
                  </span>
                </a>
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="SA - 相同方式共享">
                    <i class="iconfont icon-sa"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E5%85%AD%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/" title="计算机网络第六章 应用层">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">计算机网络第六章 应用层</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/06/23/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%B1%82/" title="计算机网络第四章 网络层">
                        <span class="hidden-mobile">计算机网络第四章 网络层</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"Tge3H6EIi2Wf2Gpf9l7LsHS1-gzGzoHsz","appKey":"3LOGiBjL7YN8wgXZXHDkhDZD","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"https://tge3h6ei.lc-cn-n1-shared.com","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <div> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span> <script src="/js/meihua.js"></script> </div> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        总访问量 
        <span id="leancloud-site-pv"></span>
         次
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        总访客数 
        <span id="leancloud-site-uv"></span>
         人
      </span>
    
    

  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>




  
<script src="//cdn.jsdelivr.net/gh/EmoryHuang/BlogBeautify@1.1/snowflake.min.js"></script>



<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
